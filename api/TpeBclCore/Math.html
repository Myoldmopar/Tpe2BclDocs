<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: TpeBclCore::Math
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../TpeBclCore.html" title="TpeBclCore (module)">TpeBclCore</a></span></span>
     &raquo; 
    <span class="title">Math</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: TpeBclCore::Math
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/UtilityFunctions.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Contains routines related to performing math operations (regressions)</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#calculate_matrix_system_with_least_squares-class_method" title="calculate_matrix_system_with_least_squares (class method)">+ (Array&lt;FixNum&gt;) <strong>calculate_matrix_system_with_least_squares</strong>(a_matrix, y_vector) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Performs the least squares regression of a system of equations.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="calculate_matrix_system_with_least_squares-class_method">
  
    + (<tt>Array&lt;FixNum&gt;</tt>) <strong>calculate_matrix_system_with_least_squares</strong>(a_matrix, y_vector) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Performs the least squares regression of a system of equations</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>a_matrix</span>
      
      
        <span class='type'>(<tt>Array&lt;Array&lt;FixNum&gt;&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The independent variables A in the system y = A x</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y_vector</span>
      
      
        <span class='type'>(<tt>Array&lt;FixNum&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The dependent variables y in the system y = A x</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;FixNum&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The coefficient vector solved; x in the system y = A x</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/UtilityFunctions.rb', line 270</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_calculate_matrix_system_with_least_squares'>calculate_matrix_system_with_least_squares</span><span class='lparen'>(</span><span class='id identifier rubyid_a_matrix'>a_matrix</span><span class='comma'>,</span> <span class='id identifier rubyid_y_vector'>y_vector</span><span class='rparen'>)</span>

    <span class='comment'>#http://see.stanford.edu/materials/lsoeldsee263/05-ls.pdf
</span>
    <span class='comment'># example inputs:
</span>    <span class='comment'>#A = Matrix[ [0.0457, 0.9784],  [0.5068, 0.5264],  [0.6625, 0.6342],  [0.7091, 0.2114],  [0.4872, 0.3343] ]
</span>    <span class='comment'>#y = Matrix[[3.97],[3.51],[4.75],[3.12],[2.77]]
</span>    <span class='comment'># example output:
</span>    <span class='comment'>#x = [3.19, 3.89]
</span>                
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nStarting a new matrix solution calculation</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_num_observations'>num_observations</span> <span class='op'>=</span> <span class='id identifier rubyid_a_matrix'>a_matrix</span><span class='period'>.</span><span class='id identifier rubyid_row_count'>row_count</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Number of observations (from A matrix) found to be: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num_observations'>num_observations</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    
    <span class='id identifier rubyid_num_observations_y'>num_observations_y</span> <span class='op'>=</span> <span class='id identifier rubyid_y_vector'>y_vector</span><span class='period'>.</span><span class='id identifier rubyid_row_count'>row_count</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Number of observations (from y vector) found to be: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num_observations_y'>num_observations_y</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    
    <span class='kw'>if</span> <span class='id identifier rubyid_num_observations'>num_observations</span> <span class='op'>==</span> <span class='id identifier rubyid_num_observations_y'>num_observations_y</span>
        <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Number of observations match, continuing</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
        <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Number of observations does not match in matrix solution algorithm...returning nil!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    
    <span class='id identifier rubyid_num_coefficients'>num_coefficients</span> <span class='op'>=</span> <span class='id identifier rubyid_a_matrix'>a_matrix</span><span class='period'>.</span><span class='id identifier rubyid_column_count'>column_count</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Num of coefficients to generate: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num_coefficients'>num_coefficients</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nA = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_a_matrix'>a_matrix</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_a_transposed'>a_transposed</span> <span class='op'>=</span> <span class='id identifier rubyid_a_matrix'>a_matrix</span><span class='period'>.</span><span class='id identifier rubyid_transpose'>transpose</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nA_T = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_a_transposed'>a_transposed</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_a_transposed_times_a'>a_transposed_times_a</span> <span class='op'>=</span> <span class='id identifier rubyid_a_transposed'>a_transposed</span> <span class='op'>*</span> <span class='id identifier rubyid_a_matrix'>a_matrix</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nA_T * A = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_a_transposed_times_a'>a_transposed_times_a</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_a_transposed_times_a_all_inversed'>a_transposed_times_a_all_inversed</span> <span class='op'>=</span> <span class='id identifier rubyid_a_transposed_times_a'>a_transposed_times_a</span><span class='period'>.</span><span class='id identifier rubyid_inverse'>inverse</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n(A_T * A) ^ -1 = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_a_transposed_times_a_all_inversed'>a_transposed_times_a_all_inversed</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_a_transposed_times_a_all_inversed_times_a_transposed'>a_transposed_times_a_all_inversed_times_a_transposed</span> <span class='op'>=</span> <span class='id identifier rubyid_a_transposed_times_a_all_inversed'>a_transposed_times_a_all_inversed</span> <span class='op'>*</span> <span class='id identifier rubyid_a_transposed'>a_transposed</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n[A_T * A) ^ -1] * A_T = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_a_transposed_times_a_all_inversed_times_a_transposed'>a_transposed_times_a_all_inversed_times_a_transposed</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_x_solution_vector'>x_solution_vector</span> <span class='op'>=</span> <span class='id identifier rubyid_a_transposed_times_a_all_inversed_times_a_transposed'>a_transposed_times_a_all_inversed_times_a_transposed</span> <span class='op'>*</span> <span class='id identifier rubyid_y_vector'>y_vector</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nX = {[A_T * A) ^ -1] * A_T} * y = </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Out</span><span class='period'>.</span><span class='id identifier rubyid_map_log'>map_log</span><span class='lparen'>(</span><span class='id identifier rubyid_x_solution_vector'>x_solution_vector</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='id identifier rubyid_x_solution_vector'>x_solution_vector</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Nov 15 14:10:27 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-2.0.0).
</div>

  </body>
</html>