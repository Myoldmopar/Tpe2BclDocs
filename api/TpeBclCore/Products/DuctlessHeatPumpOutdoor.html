<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: TpeBclCore::Products::DuctlessHeatPumpOutdoor
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!TpeBclCore/Products/DuctlessHeatPumpOutdoor.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../TpeBclCore.html" title="TpeBclCore (module)">TpeBclCore</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Products.html" title="TpeBclCore::Products (module)">Products</a></span></span>
     &raquo; 
    <span class="title">DuctlessHeatPumpOutdoor</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: TpeBclCore::Products::DuctlessHeatPumpOutdoor
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="ProductBaseClass.html" title="TpeBclCore::Products::ProductBaseClass (class)">ProductBaseClass</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="ProductBaseClass.html" title="TpeBclCore::Products::ProductBaseClass (class)">ProductBaseClass</a></span></li>
          
            <li class="next">TpeBclCore::Products::DuctlessHeatPumpOutdoor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/products/DuctlessHeatPumpOutdoor.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A simple module containing routines for writing heat pump water heater
components</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="DuctlessHeatPumpOutdoor/Map.html" title="TpeBclCore::Products::DuctlessHeatPumpOutdoor::Map (class)">Map</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="PARAM_RATEDCOOLINGCAPACITY-constant" class="">PARAM_RATEDCOOLINGCAPACITY =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for rated total cooling capacity</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rated Total Cooling Capacity</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_RATEDCOOLINGCOP-constant" class="">PARAM_RATEDCOOLINGCOP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for rated cooling coefficient of
performance</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rated Cooling Coefficient of Performance</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_RATEDHEATINGCAPACITY-constant" class="">PARAM_RATEDHEATINGCAPACITY =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for rated total heating capacity</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rated Heating Capacity</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_RATEDHEATINGCOP-constant" class="">PARAM_RATEDHEATINGCOP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for rated heating coefficient of
performance</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Rated Heating Coefficient of Performance</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_RATEDIEER-constant" class="">PARAM_RATEDIEER =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for integrated energy efficiency ratio</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Integrated Energy Efficiency Ratio</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_WORKINGREFRIGERANT-constant" class="">PARAM_WORKINGREFRIGERANT =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for heat pump working refrigerant</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Working Refrigerant</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_DEFROSTMECHANISM-constant" class="">PARAM_DEFROSTMECHANISM =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for what type of defrost is avaialble, if
any</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Defrost Mechanism</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_DEFROSTCONTROLTYPE-constant" class="">PARAM_DEFROSTCONTROLTYPE =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for how the defrost operation is
controlled</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Defrost Control Strategy</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_RESISTANCEDEFROSTCAP-constant" class="">PARAM_RESISTANCEDEFROSTCAP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for defrost resistance heater capacity,
if it exists</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Resistance Capacity</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_CRANKCASEHEATERPOWER-constant" class="">PARAM_CRANKCASEHEATERPOWER =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for the crankcase heater power</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Crankcase Heater Power</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_NUMCOMPRESSORS-constant" class="">PARAM_NUMCOMPRESSORS =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for number of compressors in the unit</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Number of Compressors</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_HEATRECOVERYOPTION-constant" class="">PARAM_HEATRECOVERYOPTION =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for whether heat recovery capability is
available for this unit</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Heat Recovery Capability</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_HEATRECOVERYMINTEMP-constant" class="">PARAM_HEATRECOVERYMINTEMP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for minimum temperature for heat recovery
operation, if it is available</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Minimum Temperature for Heat Recovery</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_HEATRECOVERYMAXTEMP-constant" class="">PARAM_HEATRECOVERYMAXTEMP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for maximum temperature for heat recovery
operation, if it is available</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Maximum Temperature for Heat Recovery</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_COOLINGPERFORMANCEMAP-constant" class="">PARAM_COOLINGPERFORMANCEMAP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for cooling performance map file name</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cooling Performance Map</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_HEATINGPERFORMANCEMAP-constant" class="">PARAM_HEATINGPERFORMANCEMAP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for heating performance map file name</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Heating Performance Map</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="PARAM_DEFROSTPERFORMANCEMAP-constant" class="">PARAM_DEFROSTPERFORMANCEMAP =
          <div class="docstring">
  <div class="discussion">
    
<p>Defines the DHP-Outdoor parameter for defrost performance map file name</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Defrost Performance Map</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#average_some_data_points-class_method" title="average_some_data_points (class method)">+ (Object) <strong>average_some_data_points</strong>(data_points, htg_or_clg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This routine averages data point dependent variable values that share the
same independent variables.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#csv_parameters-class_method" title="csv_parameters (class method)">+ (Array&lt;String&gt;) <strong>csv_parameters</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the list of csv parameters established for this product category
Overrides ProductBase.csv_parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expect_map%3F-class_method" title="expect_map? (class method)">+ (Boolean) <strong>expect_map?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_bcl_parameters-class_method" title="get_bcl_parameters (class method)">+ ({String=&gt;FixNum}) <strong>get_bcl_parameters</strong>(product_data) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the parameters that could be included in the BCL Overrides
ProductBase.get_bcl_parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge_multiple_maps-class_method" title="merge_multiple_maps (class method)">+ (Object) <strong>merge_multiple_maps</strong>(data_sets, htg_or_clg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Merges multiple map file data sets if they exist for this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-class_method" title="name (class method)">+ (String) <strong>name</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the name of this product category Overrides ProductBase.name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#product_key-class_method" title="product_key (class method)">+ (String) <strong>product_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the TPE product key string for this product category Overrides
ProductBase.product_key.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#suitable_for_bcl%3F-class_method" title="suitable_for_bcl? (class method)">+ (Boolean) <strong>suitable_for_bcl?</strong>(product_data) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Used to determine if the data entered for this product is suitable for
mapping to the BCL Any number of rules could be enforced in this routine,
as it is called once all product data has been interpreted Overrides
ProductBase.suitable_for_bcl?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_base_component_parameters-class_method" title="write_base_component_parameters (class method)">+ (Object) <strong>write_base_component_parameters</strong>(product_data) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Writes the DHP outdoor components.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_component-class_method" title="write_component (class method)">+ (Object) <strong>write_component</strong>(product_data) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides ProductBase.write_component.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_map_component_parameters-class_method" title="write_map_component_parameters (class method)">+ (Object) <strong>write_map_component_parameters</strong>(_product_data, merged_data_set, htg_or_clg) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This routine writes the map-based components for this component.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="average_some_data_points-class_method">
  
    + (<tt>Object</tt>) <strong>average_some_data_points</strong>(data_points, htg_or_clg) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This routine averages data point dependent variable values that share the
same independent variables</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data_points</span>
      
      
        <span class='type'>(<tt>Array&lt;DataSourceType, DataPoint&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of data points to average</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 929</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_average_some_data_points'>average_some_data_points</span><span class='lparen'>(</span><span class='id identifier rubyid_data_points'>data_points</span><span class='comma'>,</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span><span class='rparen'>)</span>
  <span class='comment'># OK, so data_points is a list
</span>  <span class='comment'># The first index is the index of the data point
</span>  <span class='comment'># Each data point in the list is also an array
</span>  <span class='comment'># The first index (0) in each data point is a DataSourceType
</span>  <span class='comment'># The second index (1) in each data point is the actual DHPOutdoor htg or clg MapDataPoint
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_heating_capacity_numerator'>heating_capacity_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_heating_capacity_denominator'>heating_capacity_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_data_points'>data_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_point'>point</span><span class='op'>|</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Found a map data point to average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_weight'>weight</span> <span class='op'>=</span> <span class='const'>DataSource</span><span class='op'>::</span><span class='const'>WEIGHTBYSOURCETYPE</span><span class='lbracket'>[</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data source type = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>, Weight = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weight'>weight</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_heating_capacity'>heating_capacity</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This heating capacity is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This heating_capacity = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_heating_capacity'>heating_capacity</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_heating_capacity_numerator'>heating_capacity_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_heating_capacity'>heating_capacity</span>
        <span class='id identifier rubyid_heating_capacity_denominator'>heating_capacity_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This compressor power is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This comp_power = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span>
        <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This fan power is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This fan_power = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span>
        <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This energy input is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This energy_input = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='lbracket'>[</span><span class='id identifier rubyid_heating_capacity_numerator'>heating_capacity_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:nil?</span><span class='rparen'>)</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>After averaging, this data point had missing data and will not be included in curve/table generation</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Data point has been averaged</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_heating_capacity_average'>heating_capacity_average</span> <span class='op'>=</span> <span class='id identifier rubyid_heating_capacity_numerator'>heating_capacity_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_heating_capacity_denominator'>heating_capacity_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting heating_capacity_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_heating_capacity_average'>heating_capacity_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_comp_power_average'>comp_power_average</span> <span class='op'>=</span> <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting comp_power_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_comp_power_average'>comp_power_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fan_power_average'>fan_power_average</span> <span class='op'>=</span> <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting fan_power_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fan_power_average'>fan_power_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_energy_input_average'>energy_input_average</span> <span class='op'>=</span> <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting energy_input_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_energy_input_average'>energy_input_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointHeating</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_wet_bulb_temp'>outdoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='comma'>,</span>
                                                  <span class='id identifier rubyid_heating_capacity_average'>heating_capacity_average</span><span class='comma'>,</span> <span class='id identifier rubyid_comp_power_average'>comp_power_average</span><span class='comma'>,</span> <span class='id identifier rubyid_fan_power_average'>fan_power_average</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_product_rated_htg_cap'>product_rated_htg_cap</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_average'>energy_input_average</span><span class='rparen'>)</span>

  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_cooling_capacity_numerator'>cooling_capacity_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_cooling_capacity_denominator'>cooling_capacity_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_denominator'>denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_data_points'>data_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_point'>point</span><span class='op'>|</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Found a map data point to average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_weight'>weight</span> <span class='op'>=</span> <span class='const'>DataSource</span><span class='op'>::</span><span class='const'>WEIGHTBYSOURCETYPE</span><span class='lbracket'>[</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data source type = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>, Weight = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weight'>weight</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_cooling_capacity'>cooling_capacity</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This cooling capacity is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This cooling_capacity = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_cooling_capacity'>cooling_capacity</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_cooling_capacity_numerator'>cooling_capacity_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_cooling_capacity'>cooling_capacity</span>
        <span class='id identifier rubyid_cooling_capacity_denominator'>cooling_capacity_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This compressor power is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This comp_power = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span>
        <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This fan power is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This fan_power = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span>
        <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This energy input is nil, and will not be included in the average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This energy_input = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='lbracket'>[</span><span class='id identifier rubyid_cooling_capacity_numerator'>cooling_capacity_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:nil?</span><span class='rparen'>)</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>After averaging, this data point had missing data and will not be included in curve/table generation</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Data point has been averaged</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cooling_capacity_average'>cooling_capacity_average</span> <span class='op'>=</span> <span class='id identifier rubyid_cooling_capacity_numerator'>cooling_capacity_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_cooling_capacity_denominator'>cooling_capacity_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting cooling_capacity_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cooling_capacity_average'>cooling_capacity_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_comp_power_average'>comp_power_average</span> <span class='op'>=</span> <span class='id identifier rubyid_comp_power_numerator'>comp_power_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_comp_power_denominator'>comp_power_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting comp_power_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_comp_power_average'>comp_power_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fan_power_average'>fan_power_average</span> <span class='op'>=</span> <span class='id identifier rubyid_fan_power_numerator'>fan_power_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_fan_power_denominator'>fan_power_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting fan_power_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fan_power_average'>fan_power_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_energy_input_average'>energy_input_average</span> <span class='op'>=</span> <span class='id identifier rubyid_energy_input_numerator'>energy_input_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_energy_input_denominator'>energy_input_denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting energy_input_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_energy_input_average'>energy_input_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointCooling</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_wet_bulb_temp'>indoor_wet_bulb_temp</span><span class='comma'>,</span>
                                                  <span class='id identifier rubyid_cooling_capacity_average'>cooling_capacity_average</span><span class='comma'>,</span> <span class='id identifier rubyid_comp_power_average'>comp_power_average</span><span class='comma'>,</span> <span class='id identifier rubyid_fan_power_average'>fan_power_average</span><span class='comma'>,</span> <span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_product_rated_clg_cap'>product_rated_clg_cap</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_average'>energy_input_average</span><span class='rparen'>)</span>

  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_derate_numerator'>derate_numerator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_denominator'>denominator</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_data_points'>data_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_point'>point</span><span class='op'>|</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Found a defrost map data point to average</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_weight'>weight</span> <span class='op'>=</span> <span class='const'>DataSource</span><span class='op'>::</span><span class='const'>WEIGHTBYSOURCETYPE</span><span class='lbracket'>[</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Data source type = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>, Weight = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_weight'>weight</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This derate_factor = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_derate_factor'>derate_factor</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_derate_numerator'>derate_numerator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span> <span class='op'>*</span> <span class='id identifier rubyid_point'>point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_derate_factor'>derate_factor</span>
      <span class='id identifier rubyid_denominator'>denominator</span> <span class='op'>+=</span> <span class='id identifier rubyid_weight'>weight</span>
    <span class='kw'>end</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Data point has been averaged</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_derate_average'>derate_average</span> <span class='op'>=</span> <span class='id identifier rubyid_derate_numerator'>derate_numerator</span> <span class='op'>/</span> <span class='id identifier rubyid_denominator'>denominator</span>
    <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Resulting derate_average = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_derate_average'>derate_average</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointDefrost</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_data_points'>data_points</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_derate_average'>derate_average</span><span class='rparen'>)</span>

  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="csv_parameters-class_method">
  
    + (<tt>Array&lt;String&gt;</tt>) <strong>csv_parameters</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the list of csv parameters established for this product category
Overrides ProductBase.csv_parameters</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A list of csv parameter names</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 62</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_csv_parameters'>csv_parameters</span>
  <span class='lbracket'>[</span><span class='const'>PARAM_RATEDCOOLINGCAPACITY</span><span class='comma'>,</span>
   <span class='const'>PARAM_RATEDCOOLINGCOP</span><span class='comma'>,</span>
   <span class='const'>PARAM_RATEDHEATINGCAPACITY</span><span class='comma'>,</span>
   <span class='const'>PARAM_RATEDHEATINGCOP</span><span class='comma'>,</span>
   <span class='const'>PARAM_RATEDIEER</span><span class='comma'>,</span>
   <span class='const'>PARAM_WORKINGREFRIGERANT</span><span class='comma'>,</span>
   <span class='const'>PARAM_DEFROSTMECHANISM</span><span class='comma'>,</span>
   <span class='const'>PARAM_DEFROSTCONTROLTYPE</span><span class='comma'>,</span>
   <span class='const'>PARAM_RESISTANCEDEFROSTCAP</span><span class='comma'>,</span>
   <span class='const'>PARAM_CRANKCASEHEATERPOWER</span><span class='comma'>,</span>
   <span class='const'>PARAM_NUMCOMPRESSORS</span><span class='comma'>,</span>
   <span class='const'>PARAM_HEATRECOVERYOPTION</span><span class='comma'>,</span>
   <span class='const'>PARAM_HEATRECOVERYMINTEMP</span><span class='comma'>,</span>
   <span class='const'>PARAM_HEATRECOVERYMAXTEMP</span><span class='comma'>,</span>
   <span class='const'>PARAM_COOLINGPERFORMANCEMAP</span><span class='comma'>,</span>
   <span class='const'>PARAM_HEATINGPERFORMANCEMAP</span><span class='comma'>,</span>
   <span class='const'>PARAM_DEFROSTPERFORMANCEMAP</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expect_map?-class_method">
  
    + (<tt>Boolean</tt>) <strong>expect_map?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 82</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_expect_map?'>expect_map?</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_bcl_parameters-class_method">
  
    + (<tt>{String=&gt;FixNum}</tt>) <strong>get_bcl_parameters</strong>(product_data) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the parameters that could be included in the BCL Overrides
ProductBase.get_bcl_parameters</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>{String=&gt;FixNum}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns a hash mapping parameter names with averaged values</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 99</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_bcl_parameters'>get_bcl_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_parameters'>parameters</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_params_to_include'>params_to_include</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>PARAM_RATEDCOOLINGCAPACITY</span><span class='comma'>,</span> <span class='const'>PARAM_RATEDHEATINGCAPACITY</span><span class='comma'>,</span> <span class='const'>PARAM_RATEDCOOLINGCOP</span><span class='comma'>,</span>
                       <span class='const'>PARAM_RATEDHEATINGCOP</span><span class='comma'>,</span> <span class='const'>PARAM_WORKINGREFRIGERANT</span><span class='comma'>,</span> <span class='const'>PARAM_RATEDIEER</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_params_to_include'>params_to_include</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span>
    <span class='id identifier rubyid_val'>val</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_val'>val</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Key BCL parameter, named &#39;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&#39;, was not found in the input.  Skipping...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_parameters'>parameters</span><span class='lbracket'>[</span><span class='id identifier rubyid_x'>x</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_val'>val</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_parameters'>parameters</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge_multiple_maps-class_method">
  
    + (<tt>Object</tt>) <strong>merge_multiple_maps</strong>(data_sets, htg_or_clg) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Merges multiple map file data sets if they exist for this object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data_sets</span>
      
      
        <span class='type'>(<tt>Array&lt;DataSourceType, DataPoint&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of datasets, each of which contains the type of data source for
averaging</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>htg_or_clg</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A string, either heating or cooling used to specify the type of merger
to perform</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 867</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_merge_multiple_maps'>merge_multiple_maps</span><span class='lparen'>(</span><span class='id identifier rubyid_data_sets'>data_sets</span><span class='comma'>,</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span><span class='rparen'>)</span>
  <span class='comment'># first just put all the points in one big array
</span>  <span class='id identifier rubyid_all_data_points'>all_data_points</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_data_sets'>data_sets</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_map'>this_map</span><span class='op'>|</span>
    <span class='id identifier rubyid_this_map'>this_map</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='op'>|</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointHeating</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_map'>this_map</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointCooling</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_map'>this_map</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Map</span><span class='op'>::</span><span class='const'>DhpOutdoorMapDataPointDefrost</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_map'>this_map</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'># then loop over this list, and find the unique independent variable combinations
</span>  <span class='id identifier rubyid_unique_independent_vars'>unique_independent_vars</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_independent_vars'>independent_vars</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_wet_bulb_temp'>outdoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_independent_vars'>independent_vars</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_wet_bulb_temp'>indoor_wet_bulb_temp</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_independent_vars'>independent_vars</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_this_data_point'>this_data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_unique_independent_vars'>unique_independent_vars</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_independent_vars'>independent_vars</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_unique_independent_vars'>unique_independent_vars</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_independent_vars'>independent_vars</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'># now loop over the independent variable combinations and do the averaging
</span>  <span class='id identifier rubyid_final_data_set'>final_data_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_unique_independent_vars'>unique_independent_vars</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='op'>|</span>
    <span class='id identifier rubyid_matched_data_points'>matched_data_points</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_matched_data_points'>matched_data_points</span> <span class='op'>=</span> <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_wet_bulb_temp'>outdoor_wet_bulb_temp</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span>  <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_matched_data_points'>matched_data_points</span> <span class='op'>=</span> <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span>  <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_indoor_wet_bulb_temp'>indoor_wet_bulb_temp</span>  <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_matched_data_points'>matched_data_points</span> <span class='op'>=</span> <span class='id identifier rubyid_all_data_points'>all_data_points</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span> <span class='op'>==</span> <span class='id identifier rubyid_these_independent_vars'>these_independent_vars</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_average_point'>average_point</span> <span class='op'>=</span> <span class='id identifier rubyid_average_some_data_points'>average_some_data_points</span><span class='lparen'>(</span><span class='id identifier rubyid_matched_data_points'>matched_data_points</span><span class='comma'>,</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_average_point'>average_point</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Nil averaged data point encountered, not included in final dataset</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='gvar'>$log</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Data point averaged successfully, added to final dataset</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_final_data_set'>final_data_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_average_point'>average_point</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='comment'># return the final set
</span>  <span class='id identifier rubyid_final_data_set'>final_data_set</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-class_method">
  
    + (<tt>String</tt>) <strong>name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the name of this product category Overrides ProductBase.name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The name of this product category</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 13</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ductless Heat Pump Outdoor Unit</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="product_key-class_method">
  
    + (<tt>String</tt>) <strong>product_key</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the TPE product key string for this product category Overrides
ProductBase.product_key</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The product key for this product category</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 20</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_product_key'>product_key</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tdrnt</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="suitable_for_bcl?-class_method">
  
    + (<tt>Boolean</tt>) <strong>suitable_for_bcl?</strong>(product_data) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Used to determine if the data entered for this product is suitable for
mapping to the BCL Any number of rules could be enforced in this routine,
as it is called once all product data has been interpreted Overrides
ProductBase.suitable_for_bcl?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Returns true if the product is suitable for pushing, false if not.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 90</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_suitable_for_bcl?'>suitable_for_bcl?</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_required_parameters'>required_parameters</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>PARAM_RATEDCOOLINGCAPACITY</span><span class='comma'>,</span> <span class='const'>PARAM_RATEDHEATINGCAPACITY</span><span class='comma'>,</span> <span class='const'>PARAM_RATEDCOOLINGCOP</span><span class='comma'>,</span>
                         <span class='const'>PARAM_RATEDHEATINGCOP</span><span class='comma'>,</span> <span class='const'>PARAM_WORKINGREFRIGERANT</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='const'>ParameterList</span><span class='period'>.</span><span class='id identifier rubyid_validate_required_parameters'>validate_required_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='comma'>,</span> <span class='id identifier rubyid_required_parameters'>required_parameters</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_base_component_parameters-class_method">
  
    + (<tt>Object</tt>) <strong>write_base_component_parameters</strong>(product_data) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Writes the DHP outdoor components</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>product_data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../SingleProductData.html" title="TpeBclCore::SingleProductData (class)">SingleProductData</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A product performance data structure used to write components</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 133</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_base_component_parameters'>write_base_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cool_capacity'>cool_capacity</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_RATEDCOOLINGCAPACITY</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_cool_cop'>cool_cop</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_RATEDCOOLINGCOP</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_heat_capacity'>heat_capacity</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_RATEDHEATINGCAPACITY</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_heat_cop'>heat_cop</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_RATEDHEATINGCOP</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_defrost_curve_name'>defrost_curve_name</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_DEFROSTPERFORMANCEMAP</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_defrost_mechanism'>defrost_mechanism</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_DEFROSTMECHANISM</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_defrost_control_type'>defrost_control_type</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_DEFROSTCONTROLTYPE</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_defrost_resistance_cap'>defrost_resistance_cap</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_RESISTANCEDEFROSTCAP</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_defrost_crankcase_power'>defrost_crankcase_power</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_CRANKCASEHEATERPOWER</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_number_of_compressors'>number_of_compressors</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_NUMCOMPRESSORS</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_heat_recovery_option'>heat_recovery_option</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_HEATRECOVERYOPTION</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_min_hr_temp'>min_hr_temp</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_HEATRECOVERYMINTEMP</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_max_hr_temp'>max_hr_temp</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_csv'>data_from_csv</span><span class='period'>.</span><span class='id identifier rubyid_get_parameter_average_value_by_descriptor'>get_parameter_average_value_by_descriptor</span><span class='lparen'>(</span><span class='const'>PARAM_HEATRECOVERYMAXTEMP</span><span class='rparen'>)</span>

  <span class='comment'># construct the base model and adjust existing parameters
</span>  <span class='gvar'>$acvrf</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='const'>AirConditionerVariableRefrigerantFlow</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_osm_model'>osm_model</span><span class='rparen'>)</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setName'>setName</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_name'>product_name</span><span class='rparen'>)</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setRatedTotalCoolingCapacity'>setRatedTotalCoolingCapacity</span><span class='lparen'>(</span><span class='id identifier rubyid_cool_capacity'>cool_capacity</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_cool_capacity'>cool_capacity</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setRatedCoolingCOP'>setRatedCoolingCOP</span><span class='lparen'>(</span><span class='id identifier rubyid_cool_cop'>cool_cop</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_cool_cop'>cool_cop</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setRatedTotalHeatingCapacity'>setRatedTotalHeatingCapacity</span><span class='lparen'>(</span><span class='id identifier rubyid_heat_capacity'>heat_capacity</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_heat_capacity'>heat_capacity</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setRatedHeatingCOP'>setRatedHeatingCOP</span><span class='lparen'>(</span><span class='id identifier rubyid_heat_cop'>heat_cop</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_heat_cop'>heat_cop</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_heat_recovery_option'>heat_recovery_option</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_heat_recovery_option'>heat_recovery_option</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='comment'># don&#39;t write anything
</span>  <span class='kw'>elsif</span> <span class='id identifier rubyid_heat_recovery_option'>heat_recovery_option</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YES</span><span class='tstring_end'>&#39;</span></span>
    <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatPumpWasteRecovery'>setHeatPumpWasteRecovery</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_heat_recovery_option'>heat_recovery_option</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>NO</span><span class='tstring_end'>&#39;</span></span>
    <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatPumpWasteRecovery'>setHeatPumpWasteRecovery</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setCrankcaseHeaterPowerperCompressor'>setCrankcaseHeaterPowerperCompressor</span><span class='lparen'>(</span><span class='id identifier rubyid_defrost_crankcase_power'>defrost_crankcase_power</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_defrost_crankcase_power'>defrost_crankcase_power</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setNumberofCompressors'>setNumberofCompressors</span><span class='lparen'>(</span><span class='id identifier rubyid_number_of_compressors'>number_of_compressors</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_number_of_compressors'>number_of_compressors</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setDefrostStrategy'>setDefrostStrategy</span><span class='lparen'>(</span><span class='id identifier rubyid_defrost_mechanism'>defrost_mechanism</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_defrost_mechanism'>defrost_mechanism</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setDefrostControl'>setDefrostControl</span><span class='lparen'>(</span><span class='id identifier rubyid_defrost_control_type'>defrost_control_type</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_defrost_control_type'>defrost_control_type</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setResistiveDefrostHeaterCapacity'>setResistiveDefrostHeaterCapacity</span><span class='lparen'>(</span><span class='id identifier rubyid_defrost_resistance_cap'>defrost_resistance_cap</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_defrost_resistance_cap'>defrost_resistance_cap</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setMaximumOutdoorTemperatureinHeatRecoveryMode'>setMaximumOutdoorTemperatureinHeatRecoveryMode</span><span class='lparen'>(</span><span class='id identifier rubyid_max_hr_temp'>max_hr_temp</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_max_hr_temp'>max_hr_temp</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setMinimumOutdoorTemperatureinHeatRecoveryMode'>setMinimumOutdoorTemperatureinHeatRecoveryMode</span><span class='lparen'>(</span><span class='id identifier rubyid_min_hr_temp'>min_hr_temp</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_min_hr_temp'>min_hr_temp</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_component-class_method">
  
    + (<tt>Object</tt>) <strong>write_component</strong>(product_data) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides ProductBase.write_component</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>product_data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../SingleProductData.html" title="TpeBclCore::SingleProductData (class)">SingleProductData</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A product performance data structure used to write components</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 116</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_component'>write_component</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='rparen'>)</span>
  <span class='comment'># write the base components
</span>  <span class='id identifier rubyid_write_base_component_parameters'>write_base_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='rparen'>)</span>

  <span class='comment'># merge multiple maps
</span>  <span class='id identifier rubyid_merged_htg_data_set'>merged_htg_data_set</span>     <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_merge_multiple_maps'>merge_multiple_maps</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_maps'>data_from_maps</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_merged_clg_data_set'>merged_clg_data_set</span>     <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_merge_multiple_maps'>merge_multiple_maps</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_maps'>data_from_maps</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_merged_defrost_data_set'>merged_defrost_data_set</span> <span class='op'>=</span> <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_merge_multiple_maps'>merge_multiple_maps</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_data_from_maps'>data_from_maps</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># write map components
</span>  <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_write_map_component_parameters'>write_map_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='comma'>,</span> <span class='id identifier rubyid_merged_htg_data_set'>merged_htg_data_set</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_write_map_component_parameters'>write_map_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='comma'>,</span> <span class='id identifier rubyid_merged_clg_data_set'>merged_clg_data_set</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_product_data'>product_data</span><span class='period'>.</span><span class='id identifier rubyid_product_category'>product_category</span><span class='period'>.</span><span class='id identifier rubyid_write_map_component_parameters'>write_map_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid_product_data'>product_data</span><span class='comma'>,</span> <span class='id identifier rubyid_merged_defrost_data_set'>merged_defrost_data_set</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="write_map_component_parameters-class_method">
  
    + (<tt>Object</tt>) <strong>write_map_component_parameters</strong>(_product_data, merged_data_set, htg_or_clg) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>This routine writes the map-based components for this component</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>merged_data_set</span>
      
      
        <span class='type'>(<tt>Array&lt;DataPoint&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A data set, after being post-processed with merging, to be written to the
osc</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>htg_or_clg</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A string variable, either heating or cooling, to determine which map
objects to write</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/products/DuctlessHeatPumpOutdoor.rb', line 1075</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_write_map_component_parameters'>write_map_component_parameters</span><span class='lparen'>(</span><span class='id identifier rubyid__product_data'>_product_data</span><span class='comma'>,</span> <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='comma'>,</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_htg_or_clg'>htg_or_clg</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cooling</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># VRFCoolCapFT,           !- Cooling Capacity Ratio Modifier Function of Low Temperature Curve Name
</span>    <span class='comment'># CCRM = f(T_indoor_wb, T_outdoor_db)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_cooling_cap_ratio_modifier'>cooling_cap_ratio_modifier</span> <span class='op'>=</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_cooling_capacity_frac'>cooling_capacity_frac</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_indoor_wet_bulb_temp'>indoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_cooling_cap_ratio_modifier'>cooling_cap_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_two_indep_var_table'>write_two_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setCoolingCapacityRatioModifierFunctionofLowTemperatureCurve'>setCoolingCapacityRatioModifierFunctionofLowTemperatureCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># VRFCoolEIRFT,           !- Cooling Energy Input Ratio Modifier Function of Low Temperature Curve Name
</span>    <span class='comment'># EIRM = f(T_indoor_wb, T_outdoor_db)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span> <span class='op'>+</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_indoor_wet_bulb_temp'>indoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_two_indep_var_table'>write_two_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setCoolingEnergyInputRatioModifierFunctionofLowTemperatureCurve'>setCoolingEnergyInputRatioModifierFunctionofLowTemperatureCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># CoolingEIRLowPLR,       !- Cooling Energy Input Ratio Modifier Function of Low Part-Load Ratio Curve Name
</span>    <span class='comment'># This should only apply for CR &lt; 1
</span>    <span class='comment'># EIRM = f(PLR) where we are treating PLR as combination ratio?
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='op'>|</span> <span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span> <span class='op'>+</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_one_indep_var_table'>write_one_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setCoolingEnergyInputRatioModifierFunctionofLowPartLoadRatioCurve'>setCoolingEnergyInputRatioModifierFunctionofLowPartLoadRatioCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># CoolingCombRatio,       !- Cooling Combination Ratio Correction Factor Curve Name
</span>    <span class='comment'># for CR less than 1 or up to x_min, capacity is linearly proportional to PLR
</span>    <span class='comment'># for CR &gt;= x_min, this curve defines a correction factor on cooling capacity
</span>    <span class='comment'># CCRM = f(CombinationRatio)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>&lt;</span> <span class='int'>1</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='op'>|</span> <span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_cooling_cap_ratio_modifier'>cooling_cap_ratio_modifier</span> <span class='op'>=</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_cooling_capacity_frac'>cooling_capacity_frac</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_cooling_cap_ratio_modifier'>cooling_cap_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_one_indep_var_table'>write_one_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setCoolingCombinationRatioCorrectionFactorCurve'>setCoolingCombinationRatioCorrectionFactorCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heating</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># VRFHeatCapFT,           !- Heating Capacity Ratio Modifier Function of Low Temperature Curve Name
</span>    <span class='comment'># HCRM = f(T_indoor_db, T_outdoor_wb)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_heating_cap_ratio_modifier'>heating_cap_ratio_modifier</span> <span class='op'>=</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_heating_capacity_frac'>heating_capacity_frac</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_wet_bulb_temp'>outdoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_heating_cap_ratio_modifier'>heating_cap_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_two_indep_var_table'>write_two_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatingCapacityRatioModifierFunctionofLowTemperatureCurve'>setHeatingCapacityRatioModifierFunctionofLowTemperatureCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># VRFHeatEIRFT,           !- Heating Energy Input Ratio Modifier Function of Low Temperature Curve Name
</span>    <span class='comment'># EIRM = f(T_indoor_db, T_outdoor_wb)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span> <span class='op'>+</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_indoor_dry_bulb_temp'>indoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_wet_bulb_temp'>outdoor_wet_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_two_indep_var_table'>write_two_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatingEnergyInputRatioModifierFunctionofLowTemperatureCurve'>setHeatingEnergyInputRatioModifierFunctionofLowTemperatureCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># HeatingEIRLowPLR,       !- Heating Energy Input Ratio Modifier Function of Low Part-Load Ratio Curve Name
</span>    <span class='comment'># EIRM = f(PLR), where we treat PLR as Comb Ratio
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>&gt;</span> <span class='int'>1</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='op'>|</span> <span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_compressor_power'>compressor_power</span> <span class='op'>+</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_fan_power'>fan_power</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_rated_energy_input'>rated_energy_input</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_energy_input_ratio_modifier'>energy_input_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_one_indep_var_table'>write_one_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatingEnergyInputRatioModifierFunctionofLowPartLoadRatioCurve'>setHeatingEnergyInputRatioModifierFunctionofLowPartLoadRatioCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># HeatingCombRatio,       !- Heating Combination Ratio Correction Factor Curve Name
</span>    <span class='comment'># HCRM = f(CombinationRatio)
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='op'>&lt;</span> <span class='int'>1</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='op'>|</span> <span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span> <span class='rbrace'>}</span>
        <span class='id identifier rubyid_heating_cap_ratio_modifier'>heating_cap_ratio_modifier</span> <span class='op'>=</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_heating_capacity_frac'>heating_capacity_frac</span>
        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_combination_ratio'>combination_ratio</span><span class='comma'>,</span> <span class='id identifier rubyid_heating_cap_ratio_modifier'>heating_cap_ratio_modifier</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_one_indep_var_table'>write_one_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setHeatingCombinationRatioCorrectionFactorCurve'>setHeatingCombinationRatioCorrectionFactorCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>defrost</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># DefrostDerateFactor,       !- Defrost derate factor for heating capacity
</span>    <span class='comment'># DERATE = f(OUTDOORDB, INDOORWB)
</span>    <span class='id identifier rubyid_fixed_indoor_wb'>fixed_indoor_wb</span> <span class='op'>=</span> <span class='float'>19.4</span> <span class='comment'># celsius
</span>    <span class='id identifier rubyid_this_set'>this_set</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_merged_data_set'>merged_data_set</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_point'>data_point</span><span class='op'>|</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='op'>|</span> <span class='id identifier rubyid_data_point_in_already'>data_point_in_already</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span> <span class='rbrace'>}</span>
        <span class='comment'># this is where the assumption of heating capacity derate factor = 1 / eir derate factor is imposed
</span>        <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_outdoor_dry_bulb_temp'>outdoor_dry_bulb_temp</span><span class='comma'>,</span> <span class='id identifier rubyid_fixed_indoor_wb'>fixed_indoor_wb</span><span class='comma'>,</span> <span class='float'>1.0</span> <span class='op'>/</span> <span class='id identifier rubyid_data_point'>data_point</span><span class='period'>.</span><span class='id identifier rubyid_derate_factor'>derate_factor</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_this_set'>this_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_unit_types'>unit_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_TEMPERATURE</span><span class='comma'>,</span> <span class='const'>OSMWriter</span><span class='op'>::</span><span class='const'>UNIT_TYPE_DIMENSIONLESS</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_table_curve'>table_curve</span> <span class='op'>=</span> <span class='gvar'>$osm</span><span class='period'>.</span><span class='id identifier rubyid_write_two_indep_var_table'>write_two_indep_var_table</span><span class='lparen'>(</span><span class='id identifier rubyid_this_set'>this_set</span><span class='comma'>,</span> <span class='id identifier rubyid_unit_types'>unit_types</span><span class='rparen'>)</span>
      <span class='gvar'>$acvrf</span><span class='period'>.</span><span class='id identifier rubyid_setDefrostEnergyInputRatioModifierFunctionofTemperatureCurve'>setDefrostEnergyInputRatioModifierFunctionofTemperatureCurve</span><span class='lparen'>(</span><span class='id identifier rubyid_table_curve'>table_curve</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat May 28 09:32:51 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.0.0).
</div>

  </body>
</html>